import{j as o}from"./jsx-runtime-94f6e698.js";import{a as A,c as Re}from"./index-45dcd4fb.js";import{r}from"./index-8db94870.js";import{_ as C}from"./extends-98964cd2.js";import{$ as w,a as ae}from"./index.module-2a428aa6.js";import{$ as oe}from"./index.module-a2311ee0.js";import{a as D,$ as Ue}from"./index.module-334a8208.js";import"./index-8ce4a492.js";import{T as I}from"./index-598f0916.js";import"./_commonjsHelpers-042e6b4d.js";import"./icon-2b336401.js";const Q=r.forwardRef(({children:e,sx:n},t)=>o.jsx("span",{className:A("text-sm text-fgMuted",n),ref:t,children:e}));try{Q.displayName="Caption",Q.__docgenInfo={description:"",displayName:"Caption",props:{sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"string"}}}}}catch{}const Ge=r.forwardRef((e,n)=>r.createElement(D.label,C({},e,{ref:n,onMouseDown:t=>{var a;(a=e.onMouseDown)===null||a===void 0||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}}))),[se,Rr]=Ue("Form"),Ae="Form",[Ke,T]=se(Ae),[Ze,De]=se(Ae),ze=r.forwardRef((e,n)=>{const{__scopeForm:t,onClearServerErrors:a=()=>{},...s}=e,i=r.useRef(null),m=oe(n,i),[f,F]=r.useState({}),v=r.useCallback(c=>f[c],[f]),x=r.useCallback((c,d)=>F(u=>{var h;return{...u,[c]:{...(h=u[c])!==null&&h!==void 0?h:{},...d}}}),[]),M=r.useCallback(c=>{F(d=>({...d,[c]:void 0})),l(d=>({...d,[c]:{}}))},[]),[g,E]=r.useState({}),V=r.useCallback(c=>{var d;return(d=g[c])!==null&&d!==void 0?d:[]},[g]),_=r.useCallback((c,d)=>{E(u=>{var h;return{...u,[c]:[...(h=u[c])!==null&&h!==void 0?h:[],d]}})},[]),y=r.useCallback((c,d)=>{E(u=>{var h;return{...u,[c]:((h=u[c])!==null&&h!==void 0?h:[]).filter(q=>q.id!==d)}})},[]),[j,l]=r.useState({}),$=r.useCallback(c=>{var d;return(d=j[c])!==null&&d!==void 0?d:{}},[j]),b=r.useCallback((c,d)=>{l(u=>{var h;return{...u,[c]:{...(h=u[c])!==null&&h!==void 0?h:{},...d}}})},[]),[S,L]=r.useState({}),Z=r.useCallback((c,d)=>{L(u=>{const h=new Set(u[c]).add(d);return{...u,[c]:h}})},[]),N=r.useCallback((c,d)=>{L(u=>{const h=new Set(u[c]);return h.delete(d),{...u,[c]:h}})},[]),P=r.useCallback(c=>{var d;return Array.from((d=S[c])!==null&&d!==void 0?d:[]).join(" ")||void 0},[S]);return r.createElement(Ke,{scope:t,getFieldValidity:v,onFieldValidityChange:x,getFieldCustomMatcherEntries:V,onFieldCustomMatcherEntryAdd:_,onFieldCustomMatcherEntryRemove:y,getFieldCustomErrors:$,onFieldCustomErrorsChange:b,onFieldValiditionClear:M},r.createElement(Ze,{scope:t,onFieldMessageIdAdd:Z,onFieldMessageIdRemove:N,getFieldDescription:P},r.createElement(D.form,C({},s,{ref:m,onInvalid:w(e.onInvalid,c=>{const d=Ne(c.currentTarget);d===c.target&&d.focus(),c.preventDefault()}),onSubmit:w(e.onSubmit,a,{checkForDefaultPrevented:!1}),onReset:w(e.onReset,a)}))))}),Te="FormField",[Je,ie]=se(Te),Qe=r.forwardRef((e,n)=>{const{__scopeForm:t,name:a,serverInvalid:s=!1,...i}=e,f=T(Te,t).getFieldValidity(a),F=ae();return r.createElement(Je,{scope:t,id:F,name:a,serverInvalid:s},r.createElement(D.div,C({"data-valid":ce(f,s),"data-invalid":de(f,s)},i,{ref:n})))}),me="FormLabel",Xe=r.forwardRef((e,n)=>{const{__scopeForm:t,...a}=e,s=T(me,t),i=ie(me,t),m=a.htmlFor||i.id,f=s.getFieldValidity(i.name);return r.createElement(Ge,C({"data-valid":ce(f,i.serverInvalid),"data-invalid":de(f,i.serverInvalid)},a,{ref:n,htmlFor:m}))}),z="FormControl",Ye=r.forwardRef((e,n)=>{const{__scopeForm:t,...a}=e,s=T(z,t),i=ie(z,t),m=De(z,t),f=r.useRef(null),F=oe(n,f),v=a.name||i.name,x=a.id||i.id,M=s.getFieldCustomMatcherEntries(v),{onFieldValidityChange:g,onFieldCustomErrorsChange:E,onFieldValiditionClear:V}=s,_=r.useCallback(async l=>{if(Pe(l.validity)){const u=J(l.validity);g(v,u);return}const $=l.form?new FormData(l.form):new FormData,b=[l.value,$],S=[],L=[];M.forEach(u=>{ir(u,b)?L.push(u):lr(u)&&S.push(u)});const Z=S.map(({id:u,match:h})=>[u,h(...b)]),N=Object.fromEntries(Z),P=Object.values(N).some(Boolean),c=P;l.setCustomValidity(c?R:"");const d=J(l.validity);if(g(v,d),E(v,N),!P&&L.length>0){const u=L.map(({id:He,match:Be})=>Be(...b).then(We=>[He,We])),h=await Promise.all(u),q=Object.fromEntries(h),ke=Object.values(q).some(Boolean);l.setCustomValidity(ke?R:"");const Oe=J(l.validity);g(v,Oe),E(v,q)}},[M,v,E,g]);r.useEffect(()=>{const l=f.current;if(l){const $=()=>_(l);return l.addEventListener("change",$),()=>l.removeEventListener("change",$)}},[_]);const y=r.useCallback(()=>{const l=f.current;l&&(l.setCustomValidity(""),V(v))},[v,V]);r.useEffect(()=>{var l;const $=(l=f.current)===null||l===void 0?void 0:l.form;if($)return $.addEventListener("reset",y),()=>$.removeEventListener("reset",y)},[y]),r.useEffect(()=>{const l=f.current,$=l==null?void 0:l.closest("form");if($&&i.serverInvalid){const b=Ne($);b===l&&b.focus()}},[i.serverInvalid]);const j=s.getFieldValidity(v);return r.createElement(D.input,C({"data-valid":ce(j,i.serverInvalid),"data-invalid":de(j,i.serverInvalid),"aria-invalid":i.serverInvalid?!0:void 0,"aria-describedby":m.getFieldDescription(v),title:""},a,{ref:F,id:x,name:v,onInvalid:w(e.onInvalid,l=>{const $=l.currentTarget;_($)}),onChange:w(e.onChange,l=>{y()})}))}),R="This value is not valid",er={badInput:R,patternMismatch:"This value does not match the required pattern",rangeOverflow:"This value is too large",rangeUnderflow:"This value is too small",stepMismatch:"This value does not match the required step",tooLong:"This value is too long",tooShort:"This value is too short",typeMismatch:"This value does not match the required type",valid:void 0,valueMissing:"This value is missing"},K="FormMessage",rr=r.forwardRef((e,n)=>{const{match:t,name:a,...s}=e,i=ie(K,e.__scopeForm),m=a??i.name;return t===void 0?r.createElement(le,C({},s,{ref:n,name:m}),e.children||R):typeof t=="function"?r.createElement(tr,C({match:t},s,{ref:n,name:m})):r.createElement(nr,C({match:t},s,{ref:n,name:m}))}),nr=r.forwardRef((e,n)=>{const{match:t,forceMatch:a=!1,name:s,children:i,...m}=e,F=T(K,m.__scopeForm).getFieldValidity(s);return a||(F==null?void 0:F[t])?r.createElement(le,C({ref:n},m,{name:s}),i??er[t]):null}),tr=r.forwardRef((e,n)=>{const{match:t,forceMatch:a=!1,name:s,id:i,children:m,...f}=e,F=T(K,f.__scopeForm),v=r.useRef(null),x=oe(n,v),M=ae(),g=i??M,E=r.useMemo(()=>({id:g,match:t}),[g,t]),{onFieldCustomMatcherEntryAdd:V,onFieldCustomMatcherEntryRemove:_}=F;r.useEffect(()=>(V(s,E),()=>_(s,E.id)),[E,s,V,_]);const y=F.getFieldValidity(s),l=F.getFieldCustomErrors(s)[g];return a||y&&!Pe(y)&&l?r.createElement(le,C({id:g,ref:x},f,{name:s}),m??R):null}),le=r.forwardRef((e,n)=>{const{__scopeForm:t,id:a,name:s,...i}=e,m=De(K,t),f=ae(),F=a??f,{onFieldMessageIdAdd:v,onFieldMessageIdRemove:x}=m;return r.useEffect(()=>(v(s,F),()=>x(s,F)),[s,F,v,x]),r.createElement(D.span,C({id:F},i,{ref:n}))});function J(e){const n={};for(const t in e)n[t]=e[t];return n}function ar(e){return e instanceof HTMLElement}function or(e){return"validity"in e}function sr(e){return or(e)&&(e.validity.valid===!1||e.getAttribute("aria-invalid")==="true")}function Ne(e){const n=e.elements,[t]=Array.from(n).filter(ar).filter(sr);return t}function ir(e,n){return e.match.constructor.name==="AsyncFunction"||cr(e.match,n)}function lr(e){return e.match.constructor.name==="Function"}function cr(e,n){return e(...n)instanceof Promise}function Pe(e){let n=!1;for(const t in e){const a=t;if(a!=="valid"&&a!=="customError"&&e[a]){n=!0;break}}return n}function ce(e,n){if((e==null?void 0:e.valid)===!0&&!n)return!0}function de(e,n){if((e==null?void 0:e.valid)===!1||n)return!0}const dr=Qe,X=({children:e,...n})=>o.jsx(Ye,{...n,children:e});try{X.displayName="Control",X.__docgenInfo={description:"",displayName:"Control",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}}}catch{}const Y=r.forwardRef(({children:e,name:n,sx:t},a)=>o.jsx(dr,{name:n,className:A("flex flex-col gap-0.5 justify-between items-baseline",t),ref:a,children:e}));try{Y.displayName="Field",Y.__docgenInfo={description:"",displayName:"Field",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"string"}}}}}catch{}const ee=r.forwardRef(({children:e,sx:n,...t},a)=>o.jsx(ze,{ref:a,className:A(n),...t,children:e}));try{ee.displayName="InternalForm",ee.__docgenInfo={description:"",displayName:"InternalForm",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}},sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"string"}}}}}catch{}function mr(e,n){typeof e=="function"?e(n):e!=null&&(e.current=n)}function ur(...e){return n=>e.forEach(t=>mr(t,n))}const qe=r.forwardRef((e,n)=>{const{children:t,...a}=e,s=r.Children.toArray(t),i=s.find(pr);if(i){const m=i.props.children,f=s.map(F=>F===i?r.Children.count(m)>1?r.Children.only(null):r.isValidElement(m)?m.props.children:null:F);return r.createElement(re,C({},a,{ref:n}),r.isValidElement(m)?r.cloneElement(m,void 0,f):null)}return r.createElement(re,C({},a,{ref:n}),t)});qe.displayName="Slot";const re=r.forwardRef((e,n)=>{const{children:t,...a}=e;return r.isValidElement(t)?r.cloneElement(t,{...hr(a,t.props),ref:n?ur(n,t.ref):t.ref}):r.Children.count(t)>1?r.Children.only(null):null});re.displayName="SlotClone";const fr=({children:e})=>r.createElement(r.Fragment,null,e);function pr(e){return r.isValidElement(e)&&e.type===fr}function hr(e,n){const t={...n};for(const a in n){const s=e[a],i=n[a];/^on[A-Z]/.test(a)?s&&i?t[a]=(...f)=>{i(...f),s(...f)}:s&&(t[a]=s):a==="style"?t[a]={...s,...i}:a==="className"&&(t[a]=[s,i].filter(Boolean).join(" "))}return{...e,...t}}const Fr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],vr=Fr.reduce((e,n)=>{const t=r.forwardRef((a,s)=>{const{asChild:i,...m}=a,f=i?qe:n;return r.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),r.createElement(f,C({},m,{ref:s}))});return t.displayName=`Primitive.${n}`,{...e,[n]:t}},{}),$r=r.forwardRef((e,n)=>r.createElement(vr.span,C({},e,{ref:n,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}))),Cr=Re(["text-md font-bold"],{variants:{}}),ne=r.forwardRef(({children:e,required:n,sx:t,visuallyHidden:a,...s},i)=>o.jsx(Xe,{className:A(Cr(),t),ref:i,...s,children:a?o.jsxs($r,{children:[e,o.jsx("span",{children:n&&"*"})]}):o.jsxs(o.Fragment,{children:[e,o.jsx("span",{children:n&&"*"})]})}));try{ne.displayName="Label",ne.__docgenInfo={description:"",displayName:"Label",props:{required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},visuallyHidden:{defaultValue:null,description:"",name:"visuallyHidden",required:!1,type:{name:"boolean"}},sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"string"}},asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}}}catch{}const gr=Re(["text-sm"],{variants:{variant:{error:["text-dangerFg"],warning:["text-attentionFg"],success:["text-successFg"]}}}),te=r.forwardRef(({children:e,asChild:n,sx:t,variant:a,...s},i)=>o.jsx(rr,{ref:i,className:A(gr({variant:a}),t),...s,children:e}));try{te.displayName="Validation",te.__docgenInfo={description:"",displayName:"Validation",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}},sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:'"success" | "error" | "warning" | null'}}}}}catch{}const p=Object.assign(ee,{Label:ne,Caption:Q,Validation:te,Field:Y,Control:X}),Ar={title:"Components/Form/Form/Features",tags:["autodocs"],component:p},k={args:{children:o.jsx(o.Fragment,{children:o.jsxs(p.Field,{name:"login",children:[o.jsx(p.Label,{children:"Email"}),o.jsx(p.Control,{asChild:!0,children:o.jsx(I,{placeholder:"email"})})]})})}},O={args:{children:o.jsx(o.Fragment,{children:o.jsxs(p.Field,{name:"login",children:[o.jsx(p.Label,{required:!0,children:"Email"}),o.jsx(p.Control,{asChild:!0,children:o.jsx(I,{placeholder:"email"})})]})})}},H={args:{children:o.jsx(o.Fragment,{children:o.jsxs(p.Field,{name:"login",children:[o.jsx(p.Label,{children:"Email"}),o.jsx(p.Control,{asChild:!0,children:o.jsx(I,{placeholder:"email"})}),o.jsx(p.Caption,{children:"your email"})]})})}},B={args:{children:o.jsxs(p.Field,{name:"login",children:[o.jsx(p.Label,{htmlFor:"email",children:"Email"}),o.jsx(p.Control,{asChild:!0,children:o.jsx(I,{id:"email"})}),o.jsx(p.Validation,{variant:"success",children:"Success"})]})}},W={args:{children:o.jsxs(p.Field,{name:"login",children:[o.jsx(p.Label,{htmlFor:"email",children:"Email"}),o.jsx(p.Control,{asChild:!0,children:o.jsx(I,{id:"email"})}),o.jsx(p.Validation,{variant:"warning",children:"Warning"})]})}},U={args:{children:o.jsxs(p.Field,{name:"login",children:[o.jsx(p.Label,{htmlFor:"email",children:"Email"}),o.jsx(p.Control,{asChild:!0,children:o.jsx(I,{id:"email"})}),o.jsx(p.Validation,{variant:"error",children:"Incorrect email"})]})}},G={args:{children:o.jsxs(p.Field,{name:"login",children:[o.jsx(p.Label,{visuallyHidden:!0,htmlFor:"email",children:"Email"}),o.jsx(p.Control,{asChild:!0,children:o.jsx(I,{id:"email"})})]})}};var ue,fe,pe;k.parameters={...k.parameters,docs:{...(ue=k.parameters)==null?void 0:ue.docs,source:{originalSource:`{
  args: {
    children: <>
        <Form.Field name="login">
          <Form.Label>Email</Form.Label>
          <Form.Control asChild>
            <TextInput placeholder="email" />
          </Form.Control>
        </Form.Field>
      </>
  }
}`,...(pe=(fe=k.parameters)==null?void 0:fe.docs)==null?void 0:pe.source}}};var he,Fe,ve;O.parameters={...O.parameters,docs:{...(he=O.parameters)==null?void 0:he.docs,source:{originalSource:`{
  args: {
    children: <>
        <Form.Field name="login">
          <Form.Label required>Email</Form.Label>
          <Form.Control asChild>
            <TextInput placeholder="email" />
          </Form.Control>
        </Form.Field>
      </>
  }
}`,...(ve=(Fe=O.parameters)==null?void 0:Fe.docs)==null?void 0:ve.source}}};var $e,Ce,ge;H.parameters={...H.parameters,docs:{...($e=H.parameters)==null?void 0:$e.docs,source:{originalSource:`{
  args: {
    children: <>
        <Form.Field name="login">
          <Form.Label>Email</Form.Label>
          <Form.Control asChild>
            <TextInput placeholder="email" />
          </Form.Control>
          <Form.Caption>your email</Form.Caption>
        </Form.Field>
      </>
  }
}`,...(ge=(Ce=H.parameters)==null?void 0:Ce.docs)==null?void 0:ge.source}}};var Ee,ye,xe;B.parameters={...B.parameters,docs:{...(Ee=B.parameters)==null?void 0:Ee.docs,source:{originalSource:`{
  args: {
    children: <Form.Field name="login">
        <Form.Label htmlFor="email">Email</Form.Label>
        <Form.Control asChild>
          <TextInput id="email" />
        </Form.Control>
        <Form.Validation variant="success">Success</Form.Validation>
      </Form.Field>
  }
}`,...(xe=(ye=B.parameters)==null?void 0:ye.docs)==null?void 0:xe.source}}};var _e,be,Ve;W.parameters={...W.parameters,docs:{...(_e=W.parameters)==null?void 0:_e.docs,source:{originalSource:`{
  args: {
    children: <Form.Field name="login">
        <Form.Label htmlFor="email">Email</Form.Label>
        <Form.Control asChild>
          <TextInput id="email" />
        </Form.Control>
        <Form.Validation variant="warning">Warning</Form.Validation>
      </Form.Field>
  }
}`,...(Ve=(be=W.parameters)==null?void 0:be.docs)==null?void 0:Ve.source}}};var Ie,Me,je;U.parameters={...U.parameters,docs:{...(Ie=U.parameters)==null?void 0:Ie.docs,source:{originalSource:`{
  args: {
    children: <Form.Field name="login">
        <Form.Label htmlFor="email">Email</Form.Label>
        <Form.Control asChild>
          <TextInput id="email" />
        </Form.Control>
        <Form.Validation variant="error">Incorrect email</Form.Validation>
      </Form.Field>
  }
}`,...(je=(Me=U.parameters)==null?void 0:Me.docs)==null?void 0:je.source}}};var Le,Se,we;G.parameters={...G.parameters,docs:{...(Le=G.parameters)==null?void 0:Le.docs,source:{originalSource:`{
  args: {
    children: <Form.Field name="login">
        <Form.Label visuallyHidden htmlFor="email">
          Email
        </Form.Label>
        <Form.Control asChild>
          <TextInput id="email" />
        </Form.Control>
      </Form.Field>
  }
}`,...(we=(Se=G.parameters)==null?void 0:Se.docs)==null?void 0:we.source}}};const Dr=["Default","Required","Caption","Success","Warning","Danger","VisuallyHiddenLabel"];export{H as Caption,U as Danger,k as Default,O as Required,B as Success,G as VisuallyHiddenLabel,W as Warning,Dr as __namedExportsOrder,Ar as default};
//# sourceMappingURL=form.features.stories-aab0bd3f.js.map
