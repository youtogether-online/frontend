{"version":3,"file":"avatar.features.stories-45056380.js","sources":["../../node_modules/.pnpm/@radix-ui+react-avatar@1.0.2_react-dom@18.2.0_react@18.2.0/node_modules/@radix-ui/react-avatar/dist/index.module.js","../../src/shared/ui/avatar/avatar.tsx"],"sourcesContent":["import $8NyvN$babelruntimehelpersesmextends from \"@babel/runtime/helpers/esm/extends\";\nimport {forwardRef as $8NyvN$forwardRef, useState as $8NyvN$useState, createElement as $8NyvN$createElement, useEffect as $8NyvN$useEffect} from \"react\";\nimport {createContextScope as $8NyvN$createContextScope} from \"@radix-ui/react-context\";\nimport {useCallbackRef as $8NyvN$useCallbackRef} from \"@radix-ui/react-use-callback-ref\";\nimport {useLayoutEffect as $8NyvN$useLayoutEffect} from \"@radix-ui/react-use-layout-effect\";\nimport {Primitive as $8NyvN$Primitive} from \"@radix-ui/react-primitive\";\n\n\n\n\n\n\n\n/* -------------------------------------------------------------------------------------------------\n * Avatar\n * -----------------------------------------------------------------------------------------------*/ const $cddcb0b647441e34$var$AVATAR_NAME = 'Avatar';\nconst [$cddcb0b647441e34$var$createAvatarContext, $cddcb0b647441e34$export$90370d16b488820f] = $8NyvN$createContextScope($cddcb0b647441e34$var$AVATAR_NAME);\nconst [$cddcb0b647441e34$var$AvatarProvider, $cddcb0b647441e34$var$useAvatarContext] = $cddcb0b647441e34$var$createAvatarContext($cddcb0b647441e34$var$AVATAR_NAME);\nconst $cddcb0b647441e34$export$e2255cf6045e8d47 = /*#__PURE__*/ $8NyvN$forwardRef((props, forwardedRef)=>{\n    const { __scopeAvatar: __scopeAvatar , ...avatarProps } = props;\n    const [imageLoadingStatus, setImageLoadingStatus] = $8NyvN$useState('idle');\n    return /*#__PURE__*/ $8NyvN$createElement($cddcb0b647441e34$var$AvatarProvider, {\n        scope: __scopeAvatar,\n        imageLoadingStatus: imageLoadingStatus,\n        onImageLoadingStatusChange: setImageLoadingStatus\n    }, /*#__PURE__*/ $8NyvN$createElement($8NyvN$Primitive.span, $8NyvN$babelruntimehelpersesmextends({}, avatarProps, {\n        ref: forwardedRef\n    })));\n});\n/*#__PURE__*/ Object.assign($cddcb0b647441e34$export$e2255cf6045e8d47, {\n    displayName: $cddcb0b647441e34$var$AVATAR_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * AvatarImage\n * -----------------------------------------------------------------------------------------------*/ const $cddcb0b647441e34$var$IMAGE_NAME = 'AvatarImage';\nconst $cddcb0b647441e34$export$2cd8ae1985206fe8 = /*#__PURE__*/ $8NyvN$forwardRef((props, forwardedRef)=>{\n    const { __scopeAvatar: __scopeAvatar , src: src , onLoadingStatusChange: onLoadingStatusChange = ()=>{} , ...imageProps } = props;\n    const context = $cddcb0b647441e34$var$useAvatarContext($cddcb0b647441e34$var$IMAGE_NAME, __scopeAvatar);\n    const imageLoadingStatus = $cddcb0b647441e34$var$useImageLoadingStatus(src);\n    const handleLoadingStatusChange = $8NyvN$useCallbackRef((status)=>{\n        onLoadingStatusChange(status);\n        context.onImageLoadingStatusChange(status);\n    });\n    $8NyvN$useLayoutEffect(()=>{\n        if (imageLoadingStatus !== 'idle') handleLoadingStatusChange(imageLoadingStatus);\n    }, [\n        imageLoadingStatus,\n        handleLoadingStatusChange\n    ]);\n    return imageLoadingStatus === 'loaded' ? /*#__PURE__*/ $8NyvN$createElement($8NyvN$Primitive.img, $8NyvN$babelruntimehelpersesmextends({}, imageProps, {\n        ref: forwardedRef,\n        src: src\n    })) : null;\n});\n/*#__PURE__*/ Object.assign($cddcb0b647441e34$export$2cd8ae1985206fe8, {\n    displayName: $cddcb0b647441e34$var$IMAGE_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * AvatarFallback\n * -----------------------------------------------------------------------------------------------*/ const $cddcb0b647441e34$var$FALLBACK_NAME = 'AvatarFallback';\nconst $cddcb0b647441e34$export$69fffb6a9571fbfe = /*#__PURE__*/ $8NyvN$forwardRef((props, forwardedRef)=>{\n    const { __scopeAvatar: __scopeAvatar , delayMs: delayMs , ...fallbackProps } = props;\n    const context = $cddcb0b647441e34$var$useAvatarContext($cddcb0b647441e34$var$FALLBACK_NAME, __scopeAvatar);\n    const [canRender, setCanRender] = $8NyvN$useState(delayMs === undefined);\n    $8NyvN$useEffect(()=>{\n        if (delayMs !== undefined) {\n            const timerId = window.setTimeout(()=>setCanRender(true)\n            , delayMs);\n            return ()=>window.clearTimeout(timerId)\n            ;\n        }\n    }, [\n        delayMs\n    ]);\n    return canRender && context.imageLoadingStatus !== 'loaded' ? /*#__PURE__*/ $8NyvN$createElement($8NyvN$Primitive.span, $8NyvN$babelruntimehelpersesmextends({}, fallbackProps, {\n        ref: forwardedRef\n    })) : null;\n});\n/*#__PURE__*/ Object.assign($cddcb0b647441e34$export$69fffb6a9571fbfe, {\n    displayName: $cddcb0b647441e34$var$FALLBACK_NAME\n});\n/* -----------------------------------------------------------------------------------------------*/ function $cddcb0b647441e34$var$useImageLoadingStatus(src) {\n    const [loadingStatus, setLoadingStatus] = $8NyvN$useState('idle');\n    $8NyvN$useEffect(()=>{\n        if (!src) {\n            setLoadingStatus('error');\n            return;\n        }\n        let isMounted = true;\n        const image = new window.Image();\n        const updateStatus = (status)=>()=>{\n                if (!isMounted) return;\n                setLoadingStatus(status);\n            }\n        ;\n        setLoadingStatus('loading');\n        image.onload = updateStatus('loaded');\n        image.onerror = updateStatus('error');\n        image.src = src;\n        return ()=>{\n            isMounted = false;\n        };\n    }, [\n        src\n    ]);\n    return loadingStatus;\n}\nconst $cddcb0b647441e34$export$be92b6f5f03c0fe9 = $cddcb0b647441e34$export$e2255cf6045e8d47;\nconst $cddcb0b647441e34$export$3e431a229df88919 = $cddcb0b647441e34$export$2cd8ae1985206fe8;\nconst $cddcb0b647441e34$export$fb8d7f40caaeea67 = $cddcb0b647441e34$export$69fffb6a9571fbfe;\n\n\n\n\nexport {$cddcb0b647441e34$export$90370d16b488820f as createAvatarScope, $cddcb0b647441e34$export$e2255cf6045e8d47 as Avatar, $cddcb0b647441e34$export$2cd8ae1985206fe8 as AvatarImage, $cddcb0b647441e34$export$69fffb6a9571fbfe as AvatarFallback, $cddcb0b647441e34$export$be92b6f5f03c0fe9 as Root, $cddcb0b647441e34$export$3e431a229df88919 as Image, $cddcb0b647441e34$export$fb8d7f40caaeea67 as Fallback};\n//# sourceMappingURL=index.module.js.map\n","import * as AvatarPrimitive from \"@radix-ui/react-avatar\";\nimport { cva, type VariantProps } from \"cva\";\nimport { forwardRef } from \"react\";\nimport { tw } from \"typewind\";\n\nconst avatar = cva([tw.rounded_lg.block.overflow_hidden], {\n  variants: {\n    square: {\n      true: [tw.rounded_sm],\n    },\n  },\n  defaultVariants: {\n    square: false,\n  },\n});\n\ntype AvatarProps = VariantProps<typeof avatar> & {\n  alt: string;\n  src: string;\n  fallback: string;\n  fallbackColor: string;\n  size?: number;\n};\n\nexport const Avatar = forwardRef<HTMLImageElement, AvatarProps>(\n  ({ src, alt, square, fallback, size, ...props }, ref) => {\n    return (\n      <AvatarPrimitive.Root\n        className={avatar({ square })}\n        style={{ width: size, height: size }}\n        {...props}\n      >\n        <AvatarPrimitive.Image\n          src={src}\n          alt={alt}\n          ref={ref}\n          className={tw.w_full.h_full.object_cover.block}\n        />\n        <AvatarPrimitive.Fallback\n          delayMs={1000}\n          className={tw.flex.justify_center.items_center.h_full.bg_fgSubtle}\n        >\n          {fallback}\n        </AvatarPrimitive.Fallback>\n      </AvatarPrimitive.Root>\n    );\n  },\n);\n"],"names":["$cddcb0b647441e34$var$AVATAR_NAME","$cddcb0b647441e34$var$createAvatarContext","$cddcb0b647441e34$export$90370d16b488820f","$8NyvN$createContextScope","$cddcb0b647441e34$var$AvatarProvider","$cddcb0b647441e34$var$useAvatarContext","$cddcb0b647441e34$export$e2255cf6045e8d47","$8NyvN$forwardRef","props","forwardedRef","__scopeAvatar","avatarProps","imageLoadingStatus","setImageLoadingStatus","$8NyvN$useState","$8NyvN$createElement","$8NyvN$Primitive","$8NyvN$babelruntimehelpersesmextends","$cddcb0b647441e34$var$IMAGE_NAME","$cddcb0b647441e34$export$2cd8ae1985206fe8","src","onLoadingStatusChange","imageProps","context","$cddcb0b647441e34$var$useImageLoadingStatus","handleLoadingStatusChange","$8NyvN$useCallbackRef","status","$8NyvN$useLayoutEffect","$cddcb0b647441e34$var$FALLBACK_NAME","$cddcb0b647441e34$export$69fffb6a9571fbfe","delayMs","fallbackProps","canRender","setCanRender","$8NyvN$useEffect","timerId","loadingStatus","setLoadingStatus","isMounted","image","updateStatus","$cddcb0b647441e34$export$be92b6f5f03c0fe9","$cddcb0b647441e34$export$3e431a229df88919","$cddcb0b647441e34$export$fb8d7f40caaeea67","avatar","cva","Avatar","forwardRef","alt","square","fallback","size","ref","jsxs","AvatarPrimitive.Root","jsx","AvatarPrimitive.Image","AvatarPrimitive.Fallback"],"mappings":"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","x_google_ignoreList":[0]}